<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>GeoAgro Quiz BR ‚Äî Edi√ß√£o 2024</title>
  <style>
    :root{
      --bg0:#070a16;
      --text:#eef2ff;
      --muted:rgba(238,242,255,.72);
      --stroke:rgba(255,255,255,.13);
      --shadow: 0 14px 34px rgba(0,0,0,.40);
      --r1:18px; --r2:14px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;

      /* Multicolor suave (rosa ‚Üí lil√°s ‚Üí azul ‚Üí ciano) */
      --p1:#fb7185; /* rose */
      --p2:#a78bfa; /* lilac */
      --p3:#60a5fa; /* blue */
      --p4:#22d3ee; /* cyan */
      --good:#34d399;
      --bad:#fb7185;
      --warn:#fbbf24;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(251,113,133,.25), transparent 55%),
        radial-gradient(1000px 600px at 90% 15%, rgba(96,165,250,.22), transparent 55%),
        radial-gradient(900px 600px at 30% 95%, rgba(34,211,238,.16), transparent 55%),
        linear-gradient(180deg, #090c18, #070a16 60%, #060812);
      overflow-x:hidden;
    }

    .wrap{max-width: 1020px; margin:0 auto; padding:18px 14px 26px;}

    .hero{
      border:1px solid var(--stroke);
      background: linear-gradient(135deg, rgba(251,113,133,.16), rgba(167,139,250,.12), rgba(96,165,250,.12));
      border-radius: var(--r1);
      padding: 16px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(680px 240px at 20% 0%, rgba(251,113,133,.25), transparent 55%),
        radial-gradient(520px 220px at 85% 0%, rgba(96,165,250,.25), transparent 55%);
      pointer-events:none;
      opacity:.85;
    }
    .hero > *{position:relative}

    h1{margin:0; font-size:22px; letter-spacing:.2px; display:flex; align-items:center; gap:10px}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      font-size:12px;
      color: var(--muted);
    }
    .sub{margin:8px 0 0; color:var(--muted); line-height:1.45; font-size:13px}

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 14px;
      margin-top: 14px;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      border-radius: var(--r1);
      padding: 14px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .card.color:before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(600px 260px at 0% 0%, rgba(167,139,250,.16), transparent 55%),
                  radial-gradient(520px 240px at 90% 10%, rgba(34,211,238,.14), transparent 55%);
      pointer-events:none;
    }
    .card > *{position:relative}

    .row{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
    .kpi{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}

    .k{
      flex: 1 1 140px;
      border:1px solid var(--stroke);
      background: linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
      border-radius: var(--r2);
      padding: 10px 10px 8px;
      min-width: 140px;
    }
    .k:nth-child(1){background: linear-gradient(135deg, rgba(251,113,133,.12), rgba(255,255,255,.04));}
    .k:nth-child(2){background: linear-gradient(135deg, rgba(167,139,250,.12), rgba(255,255,255,.04));}
    .k:nth-child(3){background: linear-gradient(135deg, rgba(96,165,250,.12), rgba(255,255,255,.04));}
    .k:nth-child(4){background: linear-gradient(135deg, rgba(34,211,238,.12), rgba(255,255,255,.04));}

    .k .t{font-size:11px;color:var(--muted)}
    .k .v{font-size:18px;font-weight:850;margin-top:4px}
    .k .s{font-size:11px;color:var(--muted); margin-top:2px}

    .qhead{display:flex; align-items:flex-start; justify-content:space-between; gap:12px}
    .qmeta{color:var(--muted);font-size:12px}
    .qtitle{font-size: 18px; font-weight: 900; margin: 10px 0 0; line-height: 1.25}

    .bar{
      height: 10px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      overflow:hidden;
      margin-top: 10px;
    }
    .bar > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(251,113,133,.9), rgba(167,139,250,.9), rgba(96,165,250,.9), rgba(34,211,238,.9));
      transition: width .25s ease;
    }

    .answers{display:grid; gap:10px; margin-top: 12px;}
    .ans{
      display:flex; gap:10px; align-items:flex-start;
      padding: 12px 12px;
      border-radius: 16px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      cursor:pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    .ans:hover{background: rgba(255,255,255,.10)}
    .ans:active{transform: translateY(1px)}
    .ans .key{
      width: 32px; height: 32px;
      border-radius: 11px;
      border:1px solid var(--stroke);
      display:flex; align-items:center; justify-content:center;
      font-weight:900;
      background: linear-gradient(135deg, rgba(251,113,133,.14), rgba(96,165,250,.12));
      flex: 0 0 auto;
    }
    .ans.good{border-color: rgba(52,211,153,.55); background: rgba(52,211,153,.12);}
    .ans.bad{border-color: rgba(251,113,133,.55); background: rgba(251,113,133,.10);}
    .ans .txt{line-height:1.25; font-weight: 700;}

    .feedback{
      margin-top: 12px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      border-radius: var(--r2);
      padding: 12px;
      color: var(--muted);
      line-height:1.45;
      display:none;
    }
    .feedback.show{display:block}
    .tag{
      display:inline-flex;
      padding: 4px 9px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight:900;
      font-size:12px;
      margin-right: 8px;
    }

    .opts{display:grid; gap:10px; margin-top:10px}
    .optline{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .pill{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      padding:8px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: var(--muted);
      display:flex; gap:8px; align-items:center;
      user-select:none;
    }
    .pill b{color:var(--text); font-weight:900}

    input, select, button{font-family:inherit}
    input[type="text"]{
      flex:1; min-width:180px;
      background: rgba(255,255,255,.06);
      color: var(--text);
      border:1px solid var(--stroke);
      border-radius: 12px;
      padding:10px 12px;
      outline:none;
    }
    select{
      background: rgba(255,255,255,.06);
      color: var(--text);
      border:1px solid var(--stroke);
      border-radius: 12px;
      padding:10px 12px;
      outline:none;
    }
    button{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.08);
      color: var(--text);
      border-radius: 14px;
      padding: 11px 14px;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,.22);
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    button:hover{background: rgba(255,255,255,.12)}
    button:active{transform: translateY(1px)}
    button.primary{
      border-color: rgba(96,165,250,.55);
      background: linear-gradient(135deg, rgba(251,113,133,.25), rgba(96,165,250,.22));
    }
    button.ghost{background: rgba(255,255,255,.05)}
    button:disabled{opacity:.55; cursor:not-allowed; transform:none !important}

    .chk{
      display:flex;align-items:center;gap:8px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      padding: 10px 12px;
      border-radius: 14px;
      color: var(--muted);
      user-select:none;
    }
    .chk input{transform: scale(1.12)}

    .footrow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; align-items:center; justify-content:space-between}
    .hint{color: var(--muted); font-size: 12px}

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(10,14,26,.85);
      border:1px solid var(--stroke);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      z-index: 50;
      max-width: min(720px, calc(100vw - 22px));
      text-align:center;
      font-size: 13px;
    }
    .toast.show{opacity:1; transform: translateX(-50%) translateY(-2px)}

    footer{
      margin-top: 12px;
      color: var(--muted);
      font-size: 12px;
      text-align:center;
      opacity:.95;
    }
    footer b{color:var(--text)}
  </style>
</head>

<body>
<div class="wrap">

  <div class="hero">
    <div class="row" style="justify-content:space-between; gap:12px;">
      <h1>GeoAgro Quiz BR üáßüá∑</h1>
      <span class="badge">Atalhos: <b>1‚Äì4</b> responde ¬∑ <b>Enter</b> pr√≥xima ¬∑ <b>R</b> reinicia</span>
    </div>
    <p class="sub">
      Quiz de geografia, agro, pecu√°ria, popula√ß√£o e indicadores. Banco expans√≠vel (voc√™ s√≥ cola mais perguntas).
      <br><span style="opacity:.9">Edi√ß√£o de dados: <b>2024</b> (rodap√©).</span>
    </p>

    <div class="kpi">
      <div class="k">
        <div class="t">Jogador</div>
        <div class="v" id="kPlayer">Visitante</div>
        <div class="s">salvo no aparelho</div>
      </div>
      <div class="k">
        <div class="t">Melhor</div>
        <div class="v" id="kBest">0</div>
        <div class="s">recorde do jogador</div>
      </div>
      <div class="k">
        <div class="t">Melhor sequ√™ncia</div>
        <div class="v" id="kStreakBest">0</div>
        <div class="s">acertos seguidos (recorde)</div>
      </div>
      <div class="k">
        <div class="t">Banco</div>
        <div class="v" id="kBank">0</div>
        <div class="s">perguntas totais</div>
      </div>
    </div>
  </div>

  <div class="grid">

    <div class="card color">
      <div class="qhead">
        <div class="qmeta"><span id="qProg">0/0</span> &nbsp; <span id="qCat">Categoria: ‚Äî</span></div>
        <div class="qmeta" id="qTimer">‚è≥ ‚Äî</div>
      </div>
      <div class="bar"><div id="barFill"></div></div>

      <div class="qtitle" id="qText">Clique em <b>Come√ßar</b> para iniciar üôÇ</div>

      <div class="answers" id="ansWrap" style="opacity:.7; pointer-events:none;">
        <div class="ans"><div class="key">1</div><div class="txt">‚Äî</div></div>
        <div class="ans"><div class="key">2</div><div class="txt">‚Äî</div></div>
        <div class="ans"><div class="key">3</div><div class="txt">‚Äî</div></div>
        <div class="ans"><div class="key">4</div><div class="txt">‚Äî</div></div>
      </div>

      <div class="feedback" id="fb"></div>

      <div class="footrow">
        <div class="row" style="gap:10px;">
          <button class="ghost" id="btnExplain" disabled>Explicar</button>
          <button class="ghost" id="btnNext" disabled>Pr√≥xima ‚Üí</button>
        </div>
        <div class="hint" id="hint">Dica: responda com 1‚Äì4. Enter avan√ßa.</div>
      </div>
    </div>

    <div class="card">
      <div class="row" style="justify-content:space-between">
        <div style="font-weight:950">Configura√ß√µes</div>
        <button class="ghost" id="btnReset">Resetar rodada</button>
      </div>

      <div class="opts">
        <div class="optline">
          <div class="pill">Nome: <b id="nameLabel">Visitante</b></div>
          <input id="playerName" type="text" placeholder="Digite seu nome (ex: Ernandes)">
          <button class="ghost" id="btnSaveName">Salvar</button>
        </div>

        <label class="chk"><input id="chkShuffleQ" type="checkbox" checked> Embaralhar perguntas</label>
        <label class="chk"><input id="chkShuffleA" type="checkbox" checked> Embaralhar alternativas</label>
        <label class="chk"><input id="chkTrain" type="checkbox" checked> Modo treino (feedback imediato)</label>

        <div class="optline">
          <div class="pill">Quantidade: <b id="nLabel">10</b></div>
          <select id="selN">
            <option value="2">2 perguntas</option>
            <option value="5">5 perguntas</option>
            <option value="10" selected>10 perguntas</option>
            <option value="25">25 perguntas</option>
          </select>
        </div>

        <div class="optline">
          <div class="pill">Tempo: <b id="tLabel">Sem limite</b></div>
          <select id="selT">
            <option value="0" selected>Sem limite</option>
            <option value="300">5 min</option>
            <option value="600">10 min</option>
          </select>
        </div>

        <button class="primary" id="btnStart">Come√ßar / Reiniciar</button>

        <div class="pill" style="justify-content:space-between;">
          <span>Voc√™ vs voc√™ mesmo</span>
          <b id="deltaLabel">‚Äî</b>
        </div>

        <div style="color:var(--muted); font-size:12px; line-height:1.35">
          As conquistas s√£o salvas por nome (localStorage). Troque o nome para ter perfis diferentes.
        </div>
      </div>
    </div>

  </div>

  <footer>
    <div><b>GeoAgro Quiz BR</b> ‚Äî Edi√ß√£o de dados <b>2024</b></div>
    <div>Autor: <b>Ernandes Junior</b> ¬∑ armazenamento local (localStorage)</div>
  </footer>
</div>

<div class="toast" id="toast"></div>

<script>
(() => {
  "use strict";

  // ===== Utils =====
  const $ = (id) => document.getElementById(id);

  const toastEl = $("toast");
  let toastT = null;
  function toast(msg){
    toastEl.textContent = msg;
    toastEl.classList.add("show");
    clearTimeout(toastT);
    toastT = setTimeout(()=>toastEl.classList.remove("show"), 1700);
  }

  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
  function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [arr[i],arr[j]] = [arr[j],arr[i]];
    }
    return arr;
  }
  function pickN(arr, n){
    const copy = arr.slice();
    shuffle(copy);
    return copy.slice(0, n);
  }
  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }

  // ===== UI =====
  const ui = {
    kPlayer: $("kPlayer"),
    kBest: $("kBest"),
    kStreakBest: $("kStreakBest"),
    kBank: $("kBank"),

    qProg: $("qProg"),
    qCat: $("qCat"),
    qText: $("qText"),
    ansWrap: $("ansWrap"),
    fb: $("fb"),
    barFill: $("barFill"),
    qTimer: $("qTimer"),

    btnExplain: $("btnExplain"),
    btnNext: $("btnNext"),
    btnStart: $("btnStart"),
    btnReset: $("btnReset"),

    chkShuffleQ: $("chkShuffleQ"),
    chkShuffleA: $("chkShuffleA"),
    chkTrain: $("chkTrain"),

    selN: $("selN"),
    selT: $("selT"),
    nLabel: $("nLabel"),
    tLabel: $("tLabel"),
    hint: $("hint"),

    playerName: $("playerName"),
    btnSaveName: $("btnSaveName"),
    nameLabel: $("nameLabel"),

    deltaLabel: $("deltaLabel"),
  };

  // ===== Perfis (localStorage por nome) =====
  const PROFILES_KEY = "geoagro_quiz_profiles_v1";
  const ACTIVE_KEY   = "geoagro_quiz_active_player_v1";

  function loadProfiles(){
    try { return JSON.parse(localStorage.getItem(PROFILES_KEY) || "{}"); }
    catch(e){ return {}; }
  }
  function saveProfiles(p){
    localStorage.setItem(PROFILES_KEY, JSON.stringify(p));
  }
  function getActiveName(){
    return (localStorage.getItem(ACTIVE_KEY) || "").trim();
  }
  function setActiveName(name){
    localStorage.setItem(ACTIVE_KEY, name.trim());
  }

  let profiles = loadProfiles();

  function ensureProfile(name){
    if(!profiles[name]){
      profiles[name] = { best: 0, streakBest: 0, lastScore: 0, lastTotal: 0 };
    }
    return profiles[name];
  }

  let activeName = getActiveName() || "Visitante";
  ensureProfile(activeName);
  saveProfiles(profiles);

  function refreshPlayerUI(){
    const p = ensureProfile(activeName);
    ui.kPlayer.textContent = activeName;
    ui.nameLabel.textContent = activeName;
    ui.kBest.textContent = String(p.best);
    ui.kStreakBest.textContent = String(p.streakBest);
    ui.deltaLabel.textContent = (p.lastTotal > 0)
      ? `√öltima: ${p.lastScore}/${p.lastTotal}`
      : "‚Äî";
  }

  function setPlayer(raw){
    const name = (raw || "").trim();
    activeName = name ? name : "Visitante";
    ensureProfile(activeName);
    setActiveName(activeName);
    saveProfiles(profiles);

    ui.playerName.value = (activeName === "Visitante") ? "" : activeName;
    refreshPlayerUI();
    toast("Jogador: " + activeName);
  }

  // Listeners de nome (uma vez s√≥)
  ui.btnSaveName.addEventListener("click", () => setPlayer(ui.playerName.value));
  ui.playerName.addEventListener("keydown", (e) => {
    if(e.key === "Enter"){
      e.preventDefault();
      setPlayer(ui.playerName.value);
    }
  });

  // ===== Banco de perguntas =====
  const bank = [];
  function addQ(id, cat, q, a, correct, exp, src){
    if(!Array.isArray(a) || a.length !== 4) throw new Error("Quest√£o sem 4 alternativas: " + id);
    bank.push({ id, cat, q, a, correct, exp, src });
  }

  // >>>>>>> COLE O PACOT√ÉO AQUI (depois) <<<<<<<
  // Por enquanto s√≥ 2 perguntas:
  addQ("Q1","Capitais","Qual √© a capital do Amap√°?",
    ["Macap√°","Bel√©m","Boa Vista","Rio Branco"], 0,
    "A capital do Amap√° √© Macap√°.",
    "Fonte: geografia pol√≠tica do Brasil."
  );
  addQ("Q2","Agro (MT)","Qual √© a principal produ√ß√£o agr√≠cola do Mato Grosso (s√©ries recentes)?",
    ["Soja","Uva","Cacau","Ma√ß√£"], 0,
    "Mato Grosso √© l√≠der nacional em soja em s√©ries recentes.",
    "Fonte: IBGE ‚Äî PAM (s√©ries recentes)."
  );
// ---- PIB (IBGE, PIB UF 2023) ----
  addQ("pib1","PIB por UF","Qual unidade da federa√ß√£o tem o MAIOR PIB (2023)?",
    ["S√£o Paulo","Rio de Janeiro","Minas Gerais","Paran√°"],0,
    "Em 2023, S√£o Paulo lidera o PIB entre as UFs (R$ 3.444.814 milh√µes).",
    "Fonte: IBGE ‚Äî ‚ÄúProduto Interno Bruto - PIB‚Äù, tabela por UF (PIB 2023)."
  );
  addQ("pib2","PIB por UF","Qual unidade da federa√ß√£o tem o MENOR PIB (2023)?",
    ["Roraima","Acre","Amap√°","Tocantins"],0,
    "Na tabela do IBGE para 2023, Roraima aparece com o menor PIB (R$ 25.125 milh√µes).",
    "Fonte: IBGE ‚Äî ‚ÄúProduto Interno Bruto - PIB‚Äù, tabela por UF (PIB 2023)."
  );
  addQ("pib3","PIB por UF","Qual UF tem PIB ~R$ 1,17 trilh√£o (2023)?",
    ["Rio de Janeiro","Bahia","Distrito Federal","Santa Catarina"],0,
    "O IBGE registra o PIB do RJ em 2023 como R$ 1.172.871 milh√µes (‚âàR$ 1,17 tri).",
    "Fonte: IBGE ‚Äî tabela por UF (PIB 2023)."
  );
  addQ("pib4","PIB por UF","Qual UF tem PIB ~R$ 971,9 bilh√µes (2023)?",
    ["Minas Gerais","Rio Grande do Sul","Goi√°s","Par√°"],0,
    "Minas Gerais aparece com R$ 971.978 milh√µes na tabela do IBGE (2023).",
    "Fonte: IBGE ‚Äî tabela por UF (PIB 2023)."
  );
  addQ("pib5","PIB por UF","Qual dessas UFs tem PIB acima de R$ 500 bilh√µes (2023)?",
    ["Santa Catarina","Mato Grosso do Sul","Pernambuco","Par√°"],0,
    "Em 2023, Santa Catarina registra R$ 513.393 milh√µes (acima de R$ 500 bi).",
    "Fonte: IBGE ‚Äî tabela por UF (PIB 2023)."
  );

  // ---- Popula√ß√£o (Estimativas IBGE 1¬∫ jul 2024) ----
  addQ("pop1","Popula√ß√£o","Qual estado tem a MAIOR popula√ß√£o estimada em 1¬∫/07/2024?",
    ["S√£o Paulo","Minas Gerais","Rio de Janeiro","Bahia"],0,
    "SP lidera com 45.973.194 habitantes (estimativa IBGE 2024).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop2","Popula√ß√£o","Qual estado tem a MENOR popula√ß√£o estimada em 1¬∫/07/2024?",
    ["Roraima","Acre","Amap√°","Tocantins"],0,
    "Roraima aparece com 716.793 habitantes (estimativa IBGE 2024).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop3","Popula√ß√£o","Qual a popula√ß√£o estimada do Brasil em 1¬∫/07/2024 (IBGE)?",
    ["212.583.750","203.100.000","220.400.000","197.800.000"],0,
    "O IBGE divulgou 212.583.750 habitantes para o Brasil na data de refer√™ncia 1¬∫/07/2024.",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop4","Popula√ß√£o","Qual estado tem ~3,84 milh√µes de habitantes (estimativa 1¬∫/07/2024)?",
    ["Mato Grosso","Distrito Federal","Amazonas","Esp√≠rito Santo"],0,
    "Mato Grosso aparece com 3.836.399 habitantes na estimativa de 2024.",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop5","Popula√ß√£o","Qual estado tem ~2,98 milh√µes de habitantes (estimativa 1¬∫/07/2024)?",
    ["Distrito Federal","Mato Grosso do Sul","Sergipe","Rio Grande do Norte"],0,
    "Distrito Federal aparece com 2.982.818 habitantes na estimativa de 2024.",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );

  // ---- IDHM (PNUD/Atlas Brasil ‚Äì UFs 2010) ----
  addQ("idhm1","IDH (IDHM)","Qual UF tem o MAIOR IDHM (2010)?",
    ["Distrito Federal","S√£o Paulo","Santa Catarina","Rio de Janeiro"],0,
    "No ranking de 2010, o Distrito Federal √© 1¬∫ com IDHM 0,824.",
    "Fonte: PNUD/Atlas Brasil ‚Äî Ranking IDHM UFs 2010."
  );
  addQ("idhm2","IDH (IDHM)","Qual UF tem o MENOR IDHM (2010)?",
    ["Maranh√£o","Alagoas","Piau√≠","Par√°"],0,
    "No ranking de 2010, o Maranh√£o aparece na √∫ltima posi√ß√£o (IDHM 0,639).",
    "Fonte: PNUD/Atlas Brasil ‚Äî Ranking IDHM UFs 2010."
  );
  addQ("idhm3","IDH (IDHM)","No IDHM 2010, quem est√° em 2¬∫ lugar?",
    ["S√£o Paulo","Santa Catarina","Goi√°s","Minas Gerais"],0,
    "O ranking de UFs 2010 coloca S√£o Paulo em 2¬∫ (IDHM 0,783).",
    "Fonte: PNUD/Atlas Brasil ‚Äî Ranking IDHM UFs 2010."
  );

  // ---- Agro (PAM 2024 ‚Äì IBGE) ----
  addQ("agro1","Agro (PAM/IBGE)","Qual estado foi o maior produtor de soja (2024)?",
    ["Mato Grosso","Paran√°","Rio Grande do Sul","Goi√°s"],0,
    "Em 2024, Mato Grosso segue como maior produtor nacional de soja (38,4 milh√µes t).",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro2","Agro (PAM/IBGE)","A produ√ß√£o de soja do MT em 2024 foi, aproximadamente:",
    ["38,4 milh√µes de toneladas","18,4 milh√µes de toneladas","8,4 milh√µes de toneladas","68,4 milh√µes de toneladas"],0,
    "O IBGE reporta 38,4 milh√µes de toneladas para o MT em 2024.",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro3","Agro (PAM/IBGE)","Segundo a PAM 2024, MT respondeu por cerca de quanto da produ√ß√£o nacional de milho?",
    ["41,2%","12,4%","25,0%","60,0%"],0,
    "O IBGE indica que MT ainda responde por 41,2% da produ√ß√£o nacional de milho em 2024.",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro4","Agro (PAM/IBGE)","Em 2024, qual munic√≠pio teve o maior volume de milho produzido no Brasil (segundo o IBGE)?",
    ["Sorriso (MT)","Lu√≠s Eduardo Magalh√£es (BA)","Rio Verde (GO)","Cascavel (PR)"],0,
    "A PAM 2024 cita Sorriso (MT) novamente como o maior volume de milho produzido (3,7 milh√µes t).",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro5","Agro (PAM/IBGE)","Estimativa (pre√ßo impl√≠cito): se MT gerou R$ 63,8 bi com 38,4 mi t de soja, o pre√ßo m√©dio impl√≠cito fica mais perto de:",
    ["R$ 1.660 por tonelada","R$ 660 por tonelada","R$ 3.600 por tonelada","R$ 9.800 por tonelada"],0,
    "C√°lculo: 63,8 bi / 38,4 mi ‚âà 1.661 R$/t (aproxima√ß√£o).",
    "Fonte: IBGE ‚Äî PAM 2024 (valor e quantidade de soja do MT no texto da Ag√™ncia IBGE Not√≠cias)."
  );

  // ---- Pecu√°ria (PPM 2024 ‚Äì IBGE, PDF) ----
  addQ("pec1","Pecu√°ria (PPM/IBGE)","Qual estado teve o maior rebanho bovino em 2024 (PPM/IBGE)?",
    ["Mato Grosso","Par√°","Goi√°s","Minas Gerais"],0,
    "O PDF da PPM 2024 mostra MT com ~32,9 milh√µes de cabe√ßas (13,8% do total).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec2","Pecu√°ria (PPM/IBGE)","O efetivo bovino do Brasil em 2024 foi aproximadamente:",
    ["238,2 milh√µes","212,6 milh√µes","180,0 milh√µes","300,0 milh√µes"],0,
    "A PPM 2024 registra 238,2 milh√µes de bovinos no Brasil (31/12/2024).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec3","Pecu√°ria (PPM/IBGE)","Qual foi o pre√ßo m√©dio nacional do leite em 2024 (PPM/IBGE)?",
    ["R$ 2,45 por litro","R$ 1,45 por litro","R$ 3,45 por litro","R$ 4,10 por litro"],0,
    "O PDF da PPM 2024 indica pre√ßo m√©dio nacional do leite de R$ 2,45/L em 2024.",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec4","Pecu√°ria (PPM/IBGE)","Qual estado liderou a produ√ß√£o de leite em 2024 (PPM/IBGE)?",
    ["Minas Gerais","Paran√°","Rio Grande do Sul","Santa Catarina"],0,
    "A PPM 2024 mostra Minas Gerais com ~9,8 bilh√µes de litros (27,4%).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec5","Pecu√°ria (PPM/IBGE)","Qual destes est√° entre os 3 maiores produtores de leite em 2024 (PPM/IBGE)?",
    ["Paran√°","Bahia","Amap√°","Distrito Federal"],0,
    "No resumo PPM 2024: MG (1¬∫), PR (2¬∫), RS (3¬∫).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );

  // ---- Arboriza√ß√£o / Urbanismo (Censo 2022 ‚Äì IBGE) ----
  addQ("arb1","Arboriza√ß√£o (Censo/IBGE)","Entre munic√≠pios com >100 mil hab., qual teve o MAIOR percentual de moradores em vias com arboriza√ß√£o?",
    ["Maring√° (PR)","Curitiba (PR)","Florian√≥polis (SC)","Campinas (SP)"],0,
    "O IBGE destacou Maring√° (PR) como o maior (98,6%) entre munic√≠pios >100 mil hab.",
    "Fonte: IBGE ‚Äî Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
  );
  addQ("arb2","Arboriza√ß√£o (Censo/IBGE)","Entre munic√≠pios com >100 mil hab., qual teve o MENOR percentual de moradores em vias com arboriza√ß√£o?",
    ["S√£o Jos√© (SC)","Maring√° (PR)","Campo Grande (MS)","Vit√≥ria (ES)"],0,
    "O IBGE destacou S√£o Jos√© (SC) como o menor (15,1%) entre munic√≠pios >100 mil hab.",
    "Fonte: IBGE ‚Äî Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
  );
  addQ("arb3","Arboriza√ß√£o (Censo/IBGE)","Entre as capitais, qual se destacou com alta arboriza√ß√£o (91,4%)?",
    ["Campo Grande (MS)","Bras√≠lia (DF)","Manaus (AM)","Recife (PE)"],0,
    "O IBGE destacou Campo Grande (MS) com 91,4% (capitais).",
    "Fonte: IBGE ‚Äî Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
  );

  // ---- Viol√™ncia (lista p√∫blica do Anu√°rio via Exame) ----
  addQ("vio1","Viol√™ncia (Anu√°rio)","Segundo lista do Anu√°rio (divulgada na imprensa), qual cidade apareceu como a MAIS violenta (taxa 92,9)?",
    ["Santana (AP)","Cama√ßari (BA)","Jequi√© (BA)","Sorriso (MT)"],0,
    "Na lista, Santana (AP) aparece em 1¬∫ com taxa 92,9 por 100 mil.",
    "Fonte: Exame (lista das 10 cidades mais violentas, baseada no Anu√°rio)."
  );
  addQ("vio2","Viol√™ncia (Anu√°rio)","Qual dessas cidades (da lista) fica em Mato Grosso?",
    ["Sorriso","Jequi√©","Santana","Eun√°polis"],0,
    "A lista inclui Sorriso (MT) entre as 10 cidades com maiores taxas.",
    "Fonte: Exame (lista das 10 cidades mais violentas, baseada no Anu√°rio)."
  );
  addQ("vio3","Viol√™ncia (Anu√°rio)","Qual estado aparece com MAIS munic√≠pios na lista das 10 cidades mais violentas (segundo a mat√©ria)?",
    ["Bahia","S√£o Paulo","Paran√°","Santa Catarina"],0,
    "A mat√©ria destaca a Bahia com 6 munic√≠pios na lista.",
    "Fonte: Exame (lista das 10 cidades mais violentas, baseada no Anu√°rio)."
  );

  // ---- Geografia ‚Äúcl√°ssica‚Äù (capitais, √°reas, extremos) ----
  addQ("geo1","Capitais","Qual √© a capital do Amap√°?",
    ["Macap√°","Bel√©m","Boa Vista","Rio Branco"],0,
    "A capital do Amap√° √© Macap√°.",
    "Fonte: Conhecimento geral (geografia pol√≠tica do Brasil)."
  );
  addQ("geo2","Capitais","Qual √© a capital de Mato Grosso?",
    ["Cuiab√°","Campo Grande","Goi√¢nia","Palmas"],0,
    "A capital de Mato Grosso √© Cuiab√°.",
    "Fonte: Conhecimento geral (geografia pol√≠tica do Brasil)."
  );
  addQ("geo3","Capitais","Qual √© a capital de Roraima?",
    ["Boa Vista","Macap√°","Porto Velho","Manaus"],0,
    "A capital de Roraima √© Boa Vista.",
    "Fonte: Conhecimento geral (geografia pol√≠tica do Brasil)."
  );
  addQ("geo4","Extremos","Qual √© o MAIOR estado do Brasil em √°rea (IBGE Cidades@ 2024)?",
    ["Amazonas","Par√°","Mato Grosso","Minas Gerais"],0,
    "O IBGE registra o Amazonas como o maior em √°rea (1.558.706,127 km¬≤ em 2024).",
    "Fonte: IBGE ‚Äî Cidades e Estados (AM, √°rea territorial 2024)."
  );
  addQ("geo5","Extremos","Qual √© o MENOR estado do Brasil em √°rea (desconsiderando o DF)?",
    ["Sergipe","Alagoas","Rio de Janeiro","Esp√≠rito Santo"],0,
    "Sergipe √© o menor estado brasileiro em √°rea (IBGE Cidades@ mostra ~21.938 km¬≤ em 2024).",
    "Fonte: IBGE ‚Äî Cidades e Estados (SE, √°rea territorial 2024)."
  );
  addQ("geo6","Cidades","Qual √© o munic√≠pio menos populoso do Brasil (Censo 2022)?",
    ["Serra da Saudade (MG)","Bor√° (SP)","√Åguas de S√£o Pedro (SP)","Anhanguera (GO)"],0,
    "O IBGE aponta Serra da Saudade (MG) como a menos populosa (833 hab. no Censo 2022).",
    "Fonte: IBGE Educa (munic√≠pio menos populoso; Censo 2022)."
  );

  // ---- Mais perguntas de ‚Äúranking‚Äù e ‚Äúcompara√ß√£o‚Äù (sem fugir do tema) ----
  addQ("mix1","Brasil em n√∫meros","Qual regi√£o tem a MAIOR popula√ß√£o estimada (1¬∫/07/2024)?",
    ["Sudeste","Nordeste","Sul","Norte"],0,
    "A estimativa 2024 soma ~88,6 milh√µes no Sudeste (maior entre regi√µes).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("mix2","Brasil em n√∫meros","Qual regi√£o tem a MENOR popula√ß√£o estimada (1¬∫/07/2024)?",
    ["Norte","Centro-Oeste","Sul","Nordeste"],0,
    "A estimativa 2024 indica ~18,7 milh√µes no Norte (menor entre regi√µes).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("mix3","Agro & Pecu√°ria","Qual combina√ß√£o est√° correta (lideran√ßas 2024)?",
    ["Soja: MT ¬∑ Rebanho bovino: MT ¬∑ Leite: MG","Soja: PR ¬∑ Rebanho: SP ¬∑ Leite: RJ","Soja: RS ¬∑ Rebanho: DF ¬∑ Leite: AM","Soja: GO ¬∑ Rebanho: AC ¬∑ Leite: RR"],0,
    "PAM 2024 (soja MT), PPM 2024 (rebanho MT), PPM 2024 (leite MG).",
    "Fontes: IBGE ‚Äî PAM 2024; IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("mix4","PIB por UF","Qual destes estados tem PIB > R$ 600 bi (2023)?",
    ["Paran√°","Pernambuco","Par√°","Mato Grosso"],0,
    "Paran√° registra ~R$ 670,9 bi em 2023; os outros ficam abaixo disso.",
    "Fonte: IBGE ‚Äî tabela PIB por UF (PIB 2023)."
  );
  addQ("mix5","PIB por UF","Qual destes estados tem PIB por volta de R$ 430,9 bi (2023)?",
    ["Bahia","Cear√°","Distrito Federal","Goi√°s"],0,
    "Bahia aparece com R$ 430.988 milh√µes (2023).",
    "Fonte: IBGE ‚Äî tabela PIB por UF (PIB 2023)."
  );
// ---- PIB (IBGE, PIB UF 2023) ----
  addQ("pib1","PIB por UF","Qual unidade da federa√ß√£o tem o MAIOR PIB (2023)?",
    ["S√£o Paulo","Rio de Janeiro","Minas Gerais","Paran√°"],0,
    "Em 2023, S√£o Paulo lidera o PIB entre as UFs (R$ 3.444.814 milh√µes).",
    "Fonte: IBGE ‚Äî ‚ÄúProduto Interno Bruto - PIB‚Äù, tabela por UF (PIB 2023)."
  );
  addQ("pib2","PIB por UF","Qual unidade da federa√ß√£o tem o MENOR PIB (2023)?",
    ["Roraima","Acre","Amap√°","Tocantins"],0,
    "Na tabela do IBGE para 2023, Roraima aparece com o menor PIB (R$ 25.125 milh√µes).",
    "Fonte: IBGE ‚Äî ‚ÄúProduto Interno Bruto - PIB‚Äù, tabela por UF (PIB 2023)."
  );
  addQ("pib3","PIB por UF","Qual UF tem PIB ~R$ 1,17 trilh√£o (2023)?",
    ["Rio de Janeiro","Bahia","Distrito Federal","Santa Catarina"],0,
    "O IBGE registra o PIB do RJ em 2023 como R$ 1.172.871 milh√µes (‚âàR$ 1,17 tri).",
    "Fonte: IBGE ‚Äî tabela por UF (PIB 2023)."
  );
  addQ("pib4","PIB por UF","Qual UF tem PIB ~R$ 971,9 bilh√µes (2023)?",
    ["Minas Gerais","Rio Grande do Sul","Goi√°s","Par√°"],0,
    "Minas Gerais aparece com R$ 971.978 milh√µes na tabela do IBGE (2023).",
    "Fonte: IBGE ‚Äî tabela por UF (PIB 2023)."
  );
  addQ("pib5","PIB por UF","Qual dessas UFs tem PIB acima de R$ 500 bilh√µes (2023)?",
    ["Santa Catarina","Mato Grosso do Sul","Pernambuco","Par√°"],0,
    "Em 2023, Santa Catarina registra R$ 513.393 milh√µes (acima de R$ 500 bi).",
    "Fonte: IBGE ‚Äî tabela por UF (PIB 2023)."
  );

  // ---- Popula√ß√£o (Estimativas IBGE 1¬∫ jul 2024) ----
  addQ("pop1","Popula√ß√£o","Qual estado tem a MAIOR popula√ß√£o estimada em 1¬∫/07/2024?",
    ["S√£o Paulo","Minas Gerais","Rio de Janeiro","Bahia"],0,
    "SP lidera com 45.973.194 habitantes (estimativa IBGE 2024).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop2","Popula√ß√£o","Qual estado tem a MENOR popula√ß√£o estimada em 1¬∫/07/2024?",
    ["Roraima","Acre","Amap√°","Tocantins"],0,
    "Roraima aparece com 716.793 habitantes (estimativa IBGE 2024).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop3","Popula√ß√£o","Qual a popula√ß√£o estimada do Brasil em 1¬∫/07/2024 (IBGE)?",
    ["212.583.750","203.100.000","220.400.000","197.800.000"],0,
    "O IBGE divulgou 212.583.750 habitantes para o Brasil na data de refer√™ncia 1¬∫/07/2024.",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop4","Popula√ß√£o","Qual estado tem ~3,84 milh√µes de habitantes (estimativa 1¬∫/07/2024)?",
    ["Mato Grosso","Distrito Federal","Amazonas","Esp√≠rito Santo"],0,
    "Mato Grosso aparece com 3.836.399 habitantes na estimativa de 2024.",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("pop5","Popula√ß√£o","Qual estado tem ~2,98 milh√µes de habitantes (estimativa 1¬∫/07/2024)?",
    ["Distrito Federal","Mato Grosso do Sul","Sergipe","Rio Grande do Norte"],0,
    "Distrito Federal aparece com 2.982.818 habitantes na estimativa de 2024.",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );

  // ---- IDHM (PNUD/Atlas Brasil ‚Äì UFs 2010) ----
  addQ("idhm1","IDH (IDHM)","Qual UF tem o MAIOR IDHM (2010)?",
    ["Distrito Federal","S√£o Paulo","Santa Catarina","Rio de Janeiro"],0,
    "No ranking de 2010, o Distrito Federal √© 1¬∫ com IDHM 0,824.",
    "Fonte: PNUD/Atlas Brasil ‚Äî Ranking IDHM UFs 2010."
  );
  addQ("idhm2","IDH (IDHM)","Qual UF tem o MENOR IDHM (2010)?",
    ["Maranh√£o","Alagoas","Piau√≠","Par√°"],0,
    "No ranking de 2010, o Maranh√£o aparece na √∫ltima posi√ß√£o (IDHM 0,639).",
    "Fonte: PNUD/Atlas Brasil ‚Äî Ranking IDHM UFs 2010."
  );
  addQ("idhm3","IDH (IDHM)","No IDHM 2010, quem est√° em 2¬∫ lugar?",
    ["S√£o Paulo","Santa Catarina","Goi√°s","Minas Gerais"],0,
    "O ranking de UFs 2010 coloca S√£o Paulo em 2¬∫ (IDHM 0,783).",
    "Fonte: PNUD/Atlas Brasil ‚Äî Ranking IDHM UFs 2010."
  );

  // ---- Agro (PAM 2024 ‚Äì IBGE) ----
  addQ("agro1","Agro (PAM/IBGE)","Qual estado foi o maior produtor de soja (2024)?",
    ["Mato Grosso","Paran√°","Rio Grande do Sul","Goi√°s"],0,
    "Em 2024, Mato Grosso segue como maior produtor nacional de soja (38,4 milh√µes t).",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro2","Agro (PAM/IBGE)","A produ√ß√£o de soja do MT em 2024 foi, aproximadamente:",
    ["38,4 milh√µes de toneladas","18,4 milh√µes de toneladas","8,4 milh√µes de toneladas","68,4 milh√µes de toneladas"],0,
    "O IBGE reporta 38,4 milh√µes de toneladas para o MT em 2024.",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro3","Agro (PAM/IBGE)","Segundo a PAM 2024, MT respondeu por cerca de quanto da produ√ß√£o nacional de milho?",
    ["41,2%","12,4%","25,0%","60,0%"],0,
    "O IBGE indica que MT ainda responde por 41,2% da produ√ß√£o nacional de milho em 2024.",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro4","Agro (PAM/IBGE)","Em 2024, qual munic√≠pio teve o maior volume de milho produzido no Brasil (segundo o IBGE)?",
    ["Sorriso (MT)","Lu√≠s Eduardo Magalh√£es (BA)","Rio Verde (GO)","Cascavel (PR)"],0,
    "A PAM 2024 cita Sorriso (MT) novamente como o maior volume de milho produzido (3,7 milh√µes t).",
    "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
  );
  addQ("agro5","Agro (PAM/IBGE)","Estimativa (pre√ßo impl√≠cito): se MT gerou R$ 63,8 bi com 38,4 mi t de soja, o pre√ßo m√©dio impl√≠cito fica mais perto de:",
    ["R$ 1.660 por tonelada","R$ 660 por tonelada","R$ 3.600 por tonelada","R$ 9.800 por tonelada"],0,
    "C√°lculo: 63,8 bi / 38,4 mi ‚âà 1.661 R$/t (aproxima√ß√£o).",
    "Fonte: IBGE ‚Äî PAM 2024 (valor e quantidade de soja do MT no texto da Ag√™ncia IBGE Not√≠cias)."
  );

  // ---- Pecu√°ria (PPM 2024 ‚Äì IBGE, PDF) ----
  addQ("pec1","Pecu√°ria (PPM/IBGE)","Qual estado teve o maior rebanho bovino em 2024 (PPM/IBGE)?",
    ["Mato Grosso","Par√°","Goi√°s","Minas Gerais"],0,
    "O PDF da PPM 2024 mostra MT com ~32,9 milh√µes de cabe√ßas (13,8% do total).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec2","Pecu√°ria (PPM/IBGE)","O efetivo bovino do Brasil em 2024 foi aproximadamente:",
    ["238,2 milh√µes","212,6 milh√µes","180,0 milh√µes","300,0 milh√µes"],0,
    "A PPM 2024 registra 238,2 milh√µes de bovinos no Brasil (31/12/2024).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec3","Pecu√°ria (PPM/IBGE)","Qual foi o pre√ßo m√©dio nacional do leite em 2024 (PPM/IBGE)?",
    ["R$ 2,45 por litro","R$ 1,45 por litro","R$ 3,45 por litro","R$ 4,10 por litro"],0,
    "O PDF da PPM 2024 indica pre√ßo m√©dio nacional do leite de R$ 2,45/L em 2024.",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec4","Pecu√°ria (PPM/IBGE)","Qual estado liderou a produ√ß√£o de leite em 2024 (PPM/IBGE)?",
    ["Minas Gerais","Paran√°","Rio Grande do Sul","Santa Catarina"],0,
    "A PPM 2024 mostra Minas Gerais com ~9,8 bilh√µes de litros (27,4%).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("pec5","Pecu√°ria (PPM/IBGE)","Qual destes est√° entre os 3 maiores produtores de leite em 2024 (PPM/IBGE)?",
    ["Paran√°","Bahia","Amap√°","Distrito Federal"],0,
    "No resumo PPM 2024: MG (1¬∫), PR (2¬∫), RS (3¬∫).",
    "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
  );

  // ---- Arboriza√ß√£o / Urbanismo (Censo 2022 ‚Äì IBGE) ----
  addQ("arb1","Arboriza√ß√£o (Censo/IBGE)","Entre munic√≠pios com >100 mil hab., qual teve o MAIOR percentual de moradores em vias com arboriza√ß√£o?",
    ["Maring√° (PR)","Curitiba (PR)","Florian√≥polis (SC)","Campinas (SP)"],0,
    "O IBGE destacou Maring√° (PR) como o maior (98,6%) entre munic√≠pios >100 mil hab.",
    "Fonte: IBGE ‚Äî Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
  );
  addQ("arb2","Arboriza√ß√£o (Censo/IBGE)","Entre munic√≠pios com >100 mil hab., qual teve o MENOR percentual de moradores em vias com arboriza√ß√£o?",
    ["S√£o Jos√© (SC)","Maring√° (PR)","Campo Grande (MS)","Vit√≥ria (ES)"],0,
    "O IBGE destacou S√£o Jos√© (SC) como o menor (15,1%) entre munic√≠pios >100 mil hab.",
    "Fonte: IBGE ‚Äî Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
  );
  addQ("arb3","Arboriza√ß√£o (Censo/IBGE)","Entre as capitais, qual se destacou com alta arboriza√ß√£o (91,4%)?",
    ["Campo Grande (MS)","Bras√≠lia (DF)","Manaus (AM)","Recife (PE)"],0,
    "O IBGE destacou Campo Grande (MS) com 91,4% (capitais).",
    "Fonte: IBGE ‚Äî Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
  );

  // ---- Viol√™ncia (lista p√∫blica do Anu√°rio via Exame) ----
  addQ("vio1","Viol√™ncia (Anu√°rio)","Segundo lista do Anu√°rio (divulgada na imprensa), qual cidade apareceu como a MAIS violenta (taxa 92,9)?",
    ["Santana (AP)","Cama√ßari (BA)","Jequi√© (BA)","Sorriso (MT)"],0,
    "Na lista, Santana (AP) aparece em 1¬∫ com taxa 92,9 por 100 mil.",
    "Fonte: Exame (lista das 10 cidades mais violentas, baseada no Anu√°rio)."
  );
  addQ("vio2","Viol√™ncia (Anu√°rio)","Qual dessas cidades (da lista) fica em Mato Grosso?",
    ["Sorriso","Jequi√©","Santana","Eun√°polis"],0,
    "A lista inclui Sorriso (MT) entre as 10 cidades com maiores taxas.",
    "Fonte: Exame (lista das 10 cidades mais violentas, baseada no Anu√°rio)."
  );
  addQ("vio3","Viol√™ncia (Anu√°rio)","Qual estado aparece com MAIS munic√≠pios na lista das 10 cidades mais violentas (segundo a mat√©ria)?",
    ["Bahia","S√£o Paulo","Paran√°","Santa Catarina"],0,
    "A mat√©ria destaca a Bahia com 6 munic√≠pios na lista.",
    "Fonte: Exame (lista das 10 cidades mais violentas, baseada no Anu√°rio)."
  );

  // ---- Geografia ‚Äúcl√°ssica‚Äù (capitais, √°reas, extremos) ----
  addQ("geo1","Capitais","Qual √© a capital do Amap√°?",
    ["Macap√°","Bel√©m","Boa Vista","Rio Branco"],0,
    "A capital do Amap√° √© Macap√°.",
    "Fonte: Conhecimento geral (geografia pol√≠tica do Brasil)."
  );
  addQ("geo2","Capitais","Qual √© a capital de Mato Grosso?",
    ["Cuiab√°","Campo Grande","Goi√¢nia","Palmas"],0,
    "A capital de Mato Grosso √© Cuiab√°.",
    "Fonte: Conhecimento geral (geografia pol√≠tica do Brasil)."
  );
  addQ("geo3","Capitais","Qual √© a capital de Roraima?",
    ["Boa Vista","Macap√°","Porto Velho","Manaus"],0,
    "A capital de Roraima √© Boa Vista.",
    "Fonte: Conhecimento geral (geografia pol√≠tica do Brasil)."
  );
  addQ("geo4","Extremos","Qual √© o MAIOR estado do Brasil em √°rea (IBGE Cidades@ 2024)?",
    ["Amazonas","Par√°","Mato Grosso","Minas Gerais"],0,
    "O IBGE registra o Amazonas como o maior em √°rea (1.558.706,127 km¬≤ em 2024).",
    "Fonte: IBGE ‚Äî Cidades e Estados (AM, √°rea territorial 2024)."
  );
  addQ("geo5","Extremos","Qual √© o MENOR estado do Brasil em √°rea (desconsiderando o DF)?",
    ["Sergipe","Alagoas","Rio de Janeiro","Esp√≠rito Santo"],0,
    "Sergipe √© o menor estado brasileiro em √°rea (IBGE Cidades@ mostra ~21.938 km¬≤ em 2024).",
    "Fonte: IBGE ‚Äî Cidades e Estados (SE, √°rea territorial 2024)."
  );
  addQ("geo6","Cidades","Qual √© o munic√≠pio menos populoso do Brasil (Censo 2022)?",
    ["Serra da Saudade (MG)","Bor√° (SP)","√Åguas de S√£o Pedro (SP)","Anhanguera (GO)"],0,
    "O IBGE aponta Serra da Saudade (MG) como a menos populosa (833 hab. no Censo 2022).",
    "Fonte: IBGE Educa (munic√≠pio menos populoso; Censo 2022)."
  );

  // ---- Mais perguntas de ‚Äúranking‚Äù e ‚Äúcompara√ß√£o‚Äù (sem fugir do tema) ----
  addQ("mix1","Brasil em n√∫meros","Qual regi√£o tem a MAIOR popula√ß√£o estimada (1¬∫/07/2024)?",
    ["Sudeste","Nordeste","Sul","Norte"],0,
    "A estimativa 2024 soma ~88,6 milh√µes no Sudeste (maior entre regi√µes).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("mix2","Brasil em n√∫meros","Qual regi√£o tem a MENOR popula√ß√£o estimada (1¬∫/07/2024)?",
    ["Norte","Centro-Oeste","Sul","Nordeste"],0,
    "A estimativa 2024 indica ~18,7 milh√µes no Norte (menor entre regi√µes).",
    "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o (ref. 1¬∫ jul 2024)."
  );
  addQ("mix3","Agro & Pecu√°ria","Qual combina√ß√£o est√° correta (lideran√ßas 2024)?",
    ["Soja: MT ¬∑ Rebanho bovino: MT ¬∑ Leite: MG","Soja: PR ¬∑ Rebanho: SP ¬∑ Leite: RJ","Soja: RS ¬∑ Rebanho: DF ¬∑ Leite: AM","Soja: GO ¬∑ Rebanho: AC ¬∑ Leite: RR"],0,
    "PAM 2024 (soja MT), PPM 2024 (rebanho MT), PPM 2024 (leite MG).",
    "Fontes: IBGE ‚Äî PAM 2024; IBGE ‚Äî PPM 2024 (PDF resumo)."
  );
  addQ("mix4","PIB por UF","Qual destes estados tem PIB > R$ 600 bi (2023)?",
    ["Paran√°","Pernambuco","Par√°","Mato Grosso"],0,
    "Paran√° registra ~R$ 670,9 bi em 2023; os outros ficam abaixo disso.",
    "Fonte: IBGE ‚Äî tabela PIB por UF (PIB 2023)."
  );
  addQ("mix5","PIB por UF","Qual destes estados tem PIB por volta de R$ 430,9 bi (2023)?",
    ["Bahia","Cear√°","Distrito Federal","Goi√°s"],0,
    "Bahia aparece com R$ 430.988 milh√µes (2023).",
    "Fonte: IBGE ‚Äî tabela PIB por UF (PIB 2023)."
  );
// ===== PACOT√ÉO EXTRA (cole abaixo de const bank = [];) =====

// Popula√ß√£o (IBGE 2024 ‚Äì PDF oficial)
addQ("popBR2024","Popula√ß√£o","Qual √© a popula√ß√£o estimada do Brasil em 1¬∫/07/2024 (IBGE)?",
  ["212.583.750","203.583.750","222.583.750","212.058.375"],0,
  "O IBGE publicou a estimativa oficial do Brasil em 1¬∫/07/2024 como 212.583.750 habitantes.",
  "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o 2024 (PDF oficial)."
);

addQ("popSP2024","Popula√ß√£o","Qual estado tem a maior popula√ß√£o estimada em 1¬∫/07/2024?",
  ["S√£o Paulo","Minas Gerais","Rio de Janeiro","Bahia"],0,
  "S√£o Paulo lidera as estimativas populacionais por UF em 2024.",
  "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o 2024 (PDF oficial)."
);

addQ("popRR2024","Popula√ß√£o","Qual estado tem a menor popula√ß√£o estimada em 1¬∫/07/2024?",
  ["Roraima","Amap√°","Acre","Tocantins"],0,
  "Roraima aparece com o menor total nas estimativas de 2024.",
  "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o 2024 (PDF oficial)."
);

addQ("popNE2024","Popula√ß√£o","Qual regi√£o tinha cerca de 57,1 milh√µes de habitantes (estimativa 2024)?",
  ["Nordeste","Norte","Sul","Centro-Oeste"],0,
  "O Nordeste soma 57.112.096 habitantes na estimativa de 2024.",
  "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o 2024 (PDF oficial)."
);

addQ("popSE2024","Popula√ß√£o","Qual regi√£o tinha cerca de 88,6 milh√µes de habitantes (estimativa 2024)?",
  ["Sudeste","Nordeste","Sul","Norte"],0,
  "O Sudeste soma 88.617.693 habitantes na estimativa de 2024.",
  "Fonte: IBGE ‚Äî Estimativas da Popula√ß√£o 2024 (PDF oficial)."
);

// Munic√≠pio mais populoso (IBGE release 2024)
addQ("munPop2024","Cidades","Qual √© o munic√≠pio mais populoso do Brasil (estimativa 2024)?",
  ["S√£o Paulo (SP)","Rio de Janeiro (RJ)","Bras√≠lia (DF)","Salvador (BA)"],0,
  "O release do IBGE destaca S√£o Paulo como o munic√≠pio mais populoso (estimativa 2024).",
  "Fonte: IBGE ‚Äî release das Estimativas 2024 (Ag√™ncia IBGE Not√≠cias)."
);

// Munic√≠pio menos populoso (Censo 2022 / Cidades@)
addQ("munMenor2022","Cidades","Qual √© o munic√≠pio menos populoso do Brasil (Censo 2022)?",
  ["Serra da Saudade (MG)","Bor√° (SP)","Anhanguera (GO)","√Åguas de S√£o Pedro (SP)"],0,
  "O Cidades@ do IBGE mostra Serra da Saudade (MG) com 833 pessoas no Censo 2022.",
  "Fonte: IBGE ‚Äî Cidades@ (Serra da Saudade, popula√ß√£o no √∫ltimo censo)."
);

// √Årea territorial (IBGE Cidades@)
addQ("areaMaiorUF","Extremos","Qual √© o maior estado do Brasil em √°rea (IBGE, 2024)?",
  ["Amazonas","Par√°","Mato Grosso","Minas Gerais"],0,
  "O Cidades@ do IBGE indica o Amazonas como maior UF em √°rea territorial.",
  "Fonte: IBGE ‚Äî Cidades@ (Amazonas, √°rea territorial 2024)."
);

addQ("areaMenorUF","Extremos","Qual √© o menor estado do Brasil em √°rea (IBGE; desconsiderando o DF)?",
  ["Sergipe","Alagoas","Rio de Janeiro","Esp√≠rito Santo"],0,
  "O Cidades@ do IBGE indica Sergipe como a menor UF em √°rea territorial.",
  "Fonte: IBGE ‚Äî Cidades@ (Sergipe, √°rea territorial)."
);

// Arboriza√ß√£o urbana (Censo 2022 ‚Äî release IBGE)
addQ("arbMaior100k","Arboriza√ß√£o","Entre munic√≠pios com mais de 100 mil habitantes, qual teve o MAIOR percentual de moradores em vias arborizadas?",
  ["Maring√° (PR)","Curitiba (PR)","Florian√≥polis (SC)","Campinas (SP)"],0,
  "O IBGE destacou Maring√° (PR) com 98,6% como maior entre munic√≠pios >100 mil hab.",
  "Fonte: IBGE ‚Äî release do Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
);

addQ("arbMenor100k","Arboriza√ß√£o","Entre munic√≠pios com mais de 100 mil habitantes, qual teve o MENOR percentual de moradores em vias arborizadas?",
  ["S√£o Jos√© (SC)","Joinville (SC)","Cuiab√° (MT)","Maring√° (PR)"],0,
  "O IBGE destacou S√£o Jos√© (SC) com 15,1% como menor entre munic√≠pios >100 mil hab.",
  "Fonte: IBGE ‚Äî release do Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
);

addQ("arbCapitalTop","Arboriza√ß√£o","Entre as capitais, qual se destacou com maior arboriza√ß√£o (91,4%)?",
  ["Campo Grande (MS)","Goi√¢nia (GO)","Curitiba (PR)","Palmas (TO)"],0,
  "O IBGE destacou Campo Grande (MS) como a capital com maior percentual (91,4%).",
  "Fonte: IBGE ‚Äî release do Censo 2022 (caracter√≠sticas urban√≠sticas do entorno)."
);

addQ("arbEstadoMenor","Arboriza√ß√£o","Segundo repercuss√£o do Censo 2022, qual estado teve o menor n√∫mero de vias arborizadas (38,5%)?",
  ["Sergipe","Amap√°","Roraima","Mato Grosso"],0,
  "Uma s√≠ntese dos n√∫meros do IBGE aponta Sergipe como menor percentual de vias arborizadas.",
  "Fonte: reportagem com n√∫meros do IBGE Censo 2022 (arboriza√ß√£o)."
);

// Agro (PAM 2024 ‚Äî IBGE)
addQ("sojaMaiorUF2024","Agro (PAM)","Qual estado foi o maior produtor nacional de soja em 2024 (IBGE/PAM)?",
  ["Mato Grosso","Paran√°","Rio Grande do Sul","Goi√°s"],0,
  "O release da PAM 2024 diz que MT segue como maior produtor de soja (38,4 milh√µes t).",
  "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
);

addQ("sojaMTton2024","Agro (PAM)","A produ√ß√£o de soja do Mato Grosso em 2024 foi:",
  ["38,4 milh√µes de toneladas","28,4 milh√µes de toneladas","48,4 milh√µes de toneladas","18,4 milh√µes de toneladas"],0,
  "O IBGE registra 38,4 milh√µes t de soja em MT em 2024.",
  "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
);

addQ("sojaMTvalor2024","Agro (PAM)","Segundo a PAM 2024, o valor gerado pela soja do MT foi aproximadamente:",
  ["R$ 63,8 bilh√µes","R$ 83,6 bilh√µes","R$ 6,38 bilh√µes","R$ 163,8 bilh√µes"],0,
  "O release indica que 38,4 milh√µes t geraram R$ 63,8 bilh√µes (com queda no valor).",
  "Fonte: IBGE ‚Äî PAM 2024 (Ag√™ncia IBGE Not√≠cias)."
);

// Pecu√°ria (PPM 2024 ‚Äî IBGE PDF)
addQ("bovBR2024","Pecu√°ria (PPM)","Qual foi o efetivo bovino do Brasil em 31/12/2024 (PPM/IBGE)?",
  ["238,2 milh√µes","212,6 milh√µes","180,0 milh√µes","300,0 milh√µes"],0,
  "O PDF da PPM 2024 registra 238,2 milh√µes de bovinos no Brasil.",
  "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
);

addQ("bovMT2024","Pecu√°ria (PPM)","Qual estado teve o maior rebanho bovino em 2024 (PPM/IBGE)?",
  ["Mato Grosso","Par√°","Goi√°s","Minas Gerais"],0,
  "No PDF da PPM 2024, MT lidera com 32,9 milh√µes de cabe√ßas (13,8%).",
  "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
);

addQ("bov2UF2024","Pecu√°ria (PPM)","Qual estado aparece em 2¬∫ no rebanho bovino em 2024 (PPM/IBGE)?",
  ["Par√°","Goi√°s","Mato Grosso do Sul","Minas Gerais"],0,
  "No PDF da PPM 2024, Par√° aparece em 2¬∫ com 25,6 milh√µes (10,7%).",
  "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
);

addQ("leiteBR2024","Pecu√°ria (PPM)","Qual foi a produ√ß√£o de leite do Brasil em 2024 (PPM/IBGE)?",
  ["35,7 bilh√µes de litros","25,7 bilh√µes de litros","45,7 bilh√µes de litros","15,7 bilh√µes de litros"],0,
  "O PDF da PPM 2024 registra 35,7 bilh√µes de litros (varia√ß√£o +1,4%).",
  "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
);

addQ("leiteMG2024","Pecu√°ria (PPM)","Qual estado liderou a produ√ß√£o de leite em 2024 (PPM/IBGE)?",
  ["Minas Gerais","Paran√°","Rio Grande do Sul","Santa Catarina"],0,
  "O PDF da PPM 2024 mostra MG em 1¬∫ com 9,8 bilh√µes de litros (27,4%).",
  "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
);

addQ("precoLeite2024","Pecu√°ria (PPM)","Qual foi o pre√ßo m√©dio nacional do leite em 2024 (PPM/IBGE)?",
  ["R$ 2,45 por litro","R$ 1,45 por litro","R$ 3,45 por litro","R$ 4,25 por litro"],0,
  "O resumo da PPM 2024 traz o pre√ßo m√©dio do leite (Brasil) como R$ 2,45/L.",
  "Fonte: IBGE ‚Äî PPM 2024 (PDF resumo)."
);

// Viol√™ncia (lista p√∫blica na Exame baseada no Anu√°rio, ano 2023)
addQ("vioTop1","Viol√™ncia","Segundo lista divulgada (Anu√°rio/FBSP), qual cidade apareceu como a mais violenta de 2023 (taxa 92,9)?",
  ["Santana (AP)","Cama√ßari (BA)","Jequi√© (BA)","Sorriso (MT)"],0,
  "A mat√©ria destaca Santana (AP) como 1¬∫ lugar na lista (92,9 por 100 mil).",
 

  ui.kBank.textContent = String(bank.length);

  // ===== Runtime do quiz =====
  let deck = [];
  let idx = -1;
  let answered = false;
  let score = 0;
  let streak = 0;

  // timer
  let timeLimit = 0;
  let timeLeft = 0;
  let timerInt = null;

  function updateLabels(){
    ui.nLabel.textContent = ui.selN.value;
    const t = Number(ui.selT.value);
    ui.tLabel.textContent = (t === 0) ? "Sem limite" : `${Math.round(t/60)} min`;
    ui.hint.textContent = ui.chkTrain.checked
      ? "Modo treino: feedback imediato."
      : "Modo prova: feedback s√≥ ap√≥s responder.";
  }
  ui.selN.addEventListener("change", updateLabels);
  ui.selT.addEventListener("change", updateLabels);
  ui.chkTrain.addEventListener("change", updateLabels);
  updateLabels();

  function stopTimer(){
    if(timerInt){ clearInterval(timerInt); timerInt = null; }
  }
  function fmtTime(s){
    const m = Math.floor(s/60);
    const r = s%60;
    return String(m).padStart(2,"0")+":"+String(r).padStart(2,"0");
  }
  function startTimer(){
    stopTimer();
    if(timeLimit <= 0){
      ui.qTimer.textContent = "‚è≥ Sem limite";
      return;
    }
    ui.qTimer.textContent = "‚è≥ " + fmtTime(timeLeft);
    timerInt = setInterval(() => {
      timeLeft = Math.max(0, timeLeft - 1);
      ui.qTimer.textContent = "‚è≥ " + fmtTime(timeLeft);
      if(timeLeft <= 0){
        stopTimer();
        finishQuiz(true);
      }
    }, 1000);
  }

  function render(){
    const total = deck.length;

    if(idx < 0 || idx >= total){
      ui.qProg.textContent = "0/0";
      ui.qCat.textContent = "Categoria: ‚Äî";
      ui.barFill.style.width = "0%";
      ui.qText.innerHTML = 'Clique em <b>Come√ßar</b> para iniciar üôÇ';
      ui.ansWrap.style.opacity = ".7";
      ui.ansWrap.style.pointerEvents = "none";
      ui.fb.classList.remove("show");
      ui.fb.innerHTML = "";
      ui.btnExplain.disabled = true;
      ui.btnNext.disabled = true;
      ui.qTimer.textContent = "‚è≥ ‚Äî";
      return;
    }

    const q = deck[idx];
    ui.qProg.textContent = (idx+1) + "/" + total;
    ui.qCat.textContent = "Categoria: " + q.cat;
    ui.barFill.style.width = ((idx+1)/total*100).toFixed(1) + "%";
    ui.qText.textContent = q.q;

    ui.ansWrap.innerHTML = "";
    q.a.forEach((txt, i) => {
      const el = document.createElement("div");
      el.className = "ans";
      el.innerHTML = `<div class="key">${i+1}</div><div class="txt">${escapeHtml(txt)}</div>`;
      el.addEventListener("click", () => choose(i));
      ui.ansWrap.appendChild(el);
    });

    ui.ansWrap.style.opacity = "1";
    ui.ansWrap.style.pointerEvents = "auto";
    ui.fb.classList.remove("show");
    ui.fb.innerHTML = "";
    answered = false;
    ui.btnExplain.disabled = true;
    ui.btnNext.disabled = true;
  }

  function showFeedback(isCorrect){
    const q = deck[idx];
    const tag = isCorrect
      ? `<span class="tag" style="border-color:rgba(52,211,153,.55)">‚úÖ Acertou</span>`
      : `<span class="tag" style="border-color:rgba(251,113,133,.55)">‚ùå Errou</span>`;

    ui.fb.innerHTML = `
      ${tag}
      <b>Resposta:</b> ${escapeHtml(q.a[q.correct])}<br>
      <b>Explica√ß√£o:</b> ${escapeHtml(q.exp)}<br>
      <span style="opacity:.95; font-size:12px"><b>Fonte:</b> ${escapeHtml(q.src)}</span>
    `;
    ui.fb.classList.add("show");
  }

  function choose(i){
    if(idx < 0 || idx >= deck.length){
      toast("Clique em Come√ßar üôÇ");
      return;
    }
    if(answered){
      toast("J√° respondeu. Enter ‚Üí pr√≥xima.");
      return;
    }
    const q = deck[idx];
    answered = true;

    const isCorrect = (i === q.correct);
    if(isCorrect){ score++; streak++; }
    else{ streak = 0; }

    const items = Array.from(ui.ansWrap.querySelectorAll(".ans"));
    items.forEach((el, k) => {
      if(k === q.correct) el.classList.add("good");
      else if(k === i) el.classList.add("bad");
    });

    ui.btnNext.disabled = false;
    ui.btnExplain.disabled = false;

    if(ui.chkTrain.checked){
      showFeedback(isCorrect);
    }else{
      showFeedback(isCorrect); // voc√™ pode esconder no modo prova se quiser
    }
  }

  function explain(){
    if(idx < 0 || idx >= deck.length){ toast("Ainda n√£o come√ßou üôÇ"); return; }
    if(!answered){ toast("Responda primeiro üôÇ"); return; }
    ui.fb.scrollIntoView({behavior:"smooth", block:"nearest"});
  }

  function next(){
    if(idx < 0 || idx >= deck.length){ toast("Clique em Come√ßar üôÇ"); return; }
    if(!answered){ toast("Responda antes de avan√ßar üôÇ"); return; }
    if(idx === deck.length - 1){ finishQuiz(false); return; }
    idx++;
    render();
  }

  function finishQuiz(byTime){
    stopTimer();
    const total = deck.length;
    const pct = total ? Math.round(score/total*100) : 0;

    const p = ensureProfile(activeName);
    p.lastScore = score;
    p.lastTotal = total;
    if(score > p.best) p.best = score;
    if(streak > p.streakBest) p.streakBest = streak;

    saveProfiles(profiles);
    refreshPlayerUI();

    ui.qText.innerHTML = byTime
      ? `‚è∞ Tempo! Voc√™ fez <b>${score}/${total}</b> (${pct}%).`
      : `üéâ Fim! Voc√™ fez <b>${score}/${total}</b> (${pct}%).`;

    ui.qCat.textContent = "Categoria: Resultado";
    ui.qProg.textContent = total + "/" + total;
    ui.barFill.style.width = "100%";

    ui.ansWrap.style.opacity = ".85";
    ui.ansWrap.style.pointerEvents = "none";
    ui.btnNext.disabled = true;
    ui.btnExplain.disabled = true;

    ui.fb.innerHTML = `
      <span class="tag">üìå Resumo</span>
      <b>Jogador:</b> ${escapeHtml(activeName)}<br>
      <b>Pontua√ß√£o:</b> ${score}/${total} (${pct}%)<br>
      <b>Recorde:</b> ${p.best}<br>
      <b>Melhor sequ√™ncia (recorde):</b> ${p.streakBest}<br>
      <span style="opacity:.95; font-size:12px">Dica: mude quantidade/tempo e clique em ‚ÄúCome√ßar / Reiniciar‚Äù.</span>
    `;
    ui.fb.classList.add("show");
  }

  function buildDeck(){
    if(bank.length === 0){
      toast("Banco vazio üôÉ");
      return;
    }
    const N = clamp(parseInt(ui.selN.value,10) || 10, 1, bank.length);
    const shuffleQ = ui.chkShuffleQ.checked;
    const shuffleA = ui.chkShuffleA.checked;

    let chosen = shuffleQ ? pickN(bank, N) : bank.slice(0, N);

    chosen = chosen.map(q => {
      const qq = { ...q, a: q.a.slice(), correct: q.correct };
      if(shuffleA){
        const zipped = qq.a.map((txt, i) => ({ txt, i }));
        shuffle(zipped);
        qq.a = zipped.map(z => z.txt);
        qq.correct = zipped.findIndex(z => z.i === q.correct);
      }
      return qq;
    });

    deck = chosen;
    idx = 0;
    answered = false;
    score = 0;
    streak = 0;

    timeLimit = parseInt(ui.selT.value,10) || 0;
    timeLeft = timeLimit;
    startTimer();

    render();
    toast("Valendo! üòÑ");
  }

  function resetRound(){
    stopTimer();
    deck = [];
    idx = -1;
    answered = false;
    score = 0;
    streak = 0;
    ui.fb.classList.remove("show");
    ui.fb.innerHTML = "";
    render();
    toast("Rodada resetada üôÇ");
  }

  // Bot√µes (uma vez s√≥)
  ui.btnStart.addEventListener("click", buildDeck);
  ui.btnReset.addEventListener("click", resetRound);
  ui.btnExplain.addEventListener("click", explain);
  ui.btnNext.addEventListener("click", next);

  // Teclado
  window.addEventListener("keydown", (ev) => {
    if(ev.key === "1") choose(0);
    if(ev.key === "2") choose(1);
    if(ev.key === "3") choose(2);
    if(ev.key === "4") choose(3);
    if(ev.key === "Enter") next();
    if(ev.key.toLowerCase() === "r") buildDeck();
  });

  // init
  ui.playerName.value = (activeName === "Visitante") ? "" : activeName;
  refreshPlayerUI();
  render();
})();
</script>
</body>
</html>
